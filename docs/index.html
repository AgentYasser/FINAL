<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Chat with n8n</title>
  <style>
    body { font-family: sans-serif; max-width: 600px; margin: 2rem auto; }
    #chat { border: 1px solid #ccc; padding: 1rem; height: 300px; overflow-y: auto; }
    .message { margin: .5rem 0; }
    .message.you   { color: #006; }
    .message.bot   { color: #060; }
    .message.error { color: #c00; }
    textarea { width: 100%; height: 60px; }
    button   { margin-top: .5rem; }
  </style>
</head>
<body>

  <h1>Chat with n8n</h1>
  <div id="chat"></div>

  <textarea id="input" placeholder="Say something…"></textarea>
  <button id="send">Send</button>

  <script>
    // ← **COPY-PASTE THIS URL EXACTLY**
    const WEBHOOK_URL = 
      'https://doumani.app.n8n.cloud/webhook/webhook-test/52743fa3-c608-4f03-ba4e-c27bfe23e2a4';

    const chatEl  = document.getElementById('chat');
    const inputEl = document.getElementById('input');
    const btn     = document.getElementById('send');

    btn.addEventListener('click', async () => {
      const text = inputEl.value.trim();
      if (!text) return;

      appendMessage('you', text);
      inputEl.value = '';

      try {
        const resp = await fetch(WEBHOOK_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ message: text })
        });
        if (!resp.ok) throw new Error(`HTTP ${resp.status}`);
        const { reply } = await resp.json();
        appendMessage('bot', reply);
      } catch (err) {
        appendMessage('error', 'Failed to fetch: ' + err.message);
      }
    });

    function appendMessage(who, txt) {
      const div = document.createElement('div');
      div.className = 'message ' + who;
      div.textContent = (who === 'you' ? 'You: ' 
                       : who === 'bot' ? 'Bot: ' 
                       : 'Error: ') + txt;
      chatEl.appendChild(div);
      chatEl.scrollTop = chatEl.scrollHeight;
    }
  </script>

</body>
</html>
